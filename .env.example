# Bithumb API credentials
BITHUMB_ACCESS_KEY=
BITHUMB_SECRET_KEY=

# API rate limits (Bithumb official)
BITHUMB_PUBLIC_MAX_PER_SEC=150
BITHUMB_PRIVATE_MAX_PER_SEC=140
BITHUMB_WS_PUBLIC_URL=wss://ws-api.bithumb.com/websocket/v1
BITHUMB_WS_PRIVATE_URL=wss://ws-api.bithumb.com/websocket/v1/private
BITHUMB_WS_CONNECT_MAX_PER_SEC=5

# Runtime
TRADER_STATE_FILE=.trader/state.json
TRADER_OVERLAY_FILE=.trader/overlay.json
TRADER_HTTP_AUDIT_ENABLED=false
TRADER_HTTP_AUDIT_FILE=.trader/http-audit.jsonl
TRADER_HTTP_AUDIT_MAX_BYTES=10485760
TRADER_HTTP_AUDIT_PRUNE_RATIO=0.7
TRADER_HTTP_AUDIT_CHECK_EVERY=200
TRADER_STATE_LOCK_STALE_MS=30000
TRADER_STATE_KEEP_LATEST_ONLY=true
TRADER_RETENTION_CLOSED_ORDERS=20
TRADER_RETENTION_ORDERS=400
TRADER_RETENTION_ORDER_EVENTS=1000
TRADER_RETENTION_STRATEGY_RUNS=400
TRADER_RETENTION_STRATEGY_RUN_DECISIONS=25
TRADER_RETENTION_BALANCE_SNAPSHOTS=120
TRADER_RETENTION_FILLS=1000
TRADER_RETENTION_PRUNE_UNKNOWN_SUBMIT_MS=1800000
TRADER_STATE_KPI_HISTORY_MAX_ENTRIES=240
TRADER_STATE_KPI_HISTORY_SHARD_DAYS=7
TZ=Asia/Seoul

# Strategy (orthodox low-latency flow, default: risk-managed momentum)
STRATEGY_NAME=risk_managed_momentum
STRATEGY_SYMBOL=BTC_KRW
STRATEGY_CANDLE_INTERVAL=15m
STRATEGY_CANDLE_COUNT=120
# risk-managed momentum params (aggressive default profile)
STRATEGY_MOMENTUM_LOOKBACK=24
STRATEGY_VOLATILITY_LOOKBACK=72
STRATEGY_MOMENTUM_ENTRY_BPS=12
STRATEGY_MOMENTUM_EXIT_BPS=8
STRATEGY_TARGET_VOLATILITY_PCT=0.6
STRATEGY_RM_MIN_MULTIPLIER=0.6
STRATEGY_RM_MAX_MULTIPLIER=2.2
STRATEGY_AUTO_SELL_ENABLED=true
STRATEGY_SELL_ALL_ON_EXIT=true
STRATEGY_SELL_ALL_QTY_PRECISION=8
STRATEGY_BASE_ORDER_AMOUNT_KRW=20000

# Risk
RISK_MAX_CONSECUTIVE_RISK_REJECTS=4
RISK_MIN_ORDER_NOTIONAL_KRW=20000
RISK_MAX_ORDER_NOTIONAL_KRW=300000
RISK_MAX_OPEN_ORDERS=5
RISK_MAX_EXPOSURE_KRW=2000000
RISK_MAX_DAILY_LOSS_KRW=500000
TRADER_INITIAL_CAPITAL_KRW=

# Overlay (AI/ML output cache only; never in execution timing path)
OVERLAY_ENABLED=true
OVERLAY_TIMEOUT_MS=500
OVERLAY_DEFAULT_MULTIPLIER=1
OVERLAY_FALLBACK_MULTIPLIER=1
OVERLAY_MIN_MULTIPLIER=0.2
OVERLAY_MAX_MULTIPLIER=1.5
OVERLAY_MAX_STALENESS_SEC=600

# AI runtime settings bridge (AI writes this file; execution loop refreshes snapshot periodically)
AI_SETTINGS_ENABLED=true
AI_SETTINGS_FILE=.trader/ai-settings.json
AI_RUNTIME_SETTINGS_FILE=.trader/ai-runtime.json
AI_SETTINGS_APPLY_OVERLAY=true
AI_SETTINGS_APPLY_KILL_SWITCH=true
AI_SETTINGS_APPLY_COOLDOWN_SEC=180
AI_SETTINGS_REQUIRE_OPTIMIZER_APPROVAL=true
AI_RUNTIME_SETTINGS_MAX_AGE_SEC=0
AI_SETTINGS_REFRESH_FIXED_SEC=0
AI_SETTINGS_REFRESH_MIN_SEC=1800
AI_SETTINGS_REFRESH_MAX_SEC=3600

# Market universe filter (broad KRW universe, but avoids illiquid/weird symbols)
MARKET_UNIVERSE_ENABLED=true
MARKET_UNIVERSE_QUOTE=KRW
MARKET_UNIVERSE_MIN_ACC_TRADE_VALUE_24H_KRW=20000000000
MARKET_UNIVERSE_MIN_PRICE_KRW=1
MARKET_UNIVERSE_MAX_SYMBOLS=20
MARKET_UNIVERSE_INCLUDE_SYMBOLS=BTC_KRW,ETH_KRW,XRP_KRW,SOL_KRW,DOGE_KRW,USDT_KRW
MARKET_UNIVERSE_EXCLUDE_SYMBOLS=
MARKET_UNIVERSE_MIN_BASE_ASSET_LENGTH=2
MARKET_UNIVERSE_REFRESH_MIN_SEC=1800
MARKET_UNIVERSE_REFRESH_MAX_SEC=3600
MARKET_UNIVERSE_TICKER_CHUNK_SIZE=40
MARKET_UNIVERSE_FILE=.trader/market-universe.json

# Execution daemon (npm start)
EXECUTION_ENABLED=true
EXECUTION_SYMBOL=BTC_KRW
EXECUTION_SYMBOLS=BTC_KRW
EXECUTION_ORDER_AMOUNT_KRW=20000
EXECUTION_WINDOW_SEC=300
EXECUTION_COOLDOWN_SEC=30
EXECUTION_KPI_GUARD_ENABLED=true
EXECUTION_KPI_GUARD_MIN_TRADES=3
EXECUTION_KPI_GUARD_MIN_WIN_RATE_PCT=35
EXECUTION_KPI_GUARD_MAX_ABS_SLIPPAGE_BPS=120
EXECUTION_KPI_GUARD_MIN_EXPECTANCY_KRW=-5000
EXECUTION_KPI_GUARD_MAX_CONSECUTIVE_VIOLATIONS=2
EXECUTION_MAX_SYMBOLS_PER_WINDOW=3
EXECUTION_MAX_ORDER_ATTEMPTS_PER_WINDOW=1
EXECUTION_RESTART_DELAY_MS=1000
EXECUTION_LOG_ONLY_ON_ACTIVITY=true
EXECUTION_LOG_HEARTBEAT_WINDOWS=12

# Execution KPI monitoring
EXECUTION_KPI_REPORT_FILE=.trader/execution-kpi-report.jsonl
EXECUTION_KPI_REPORT_SUMMARY_FILE=.trader/execution-kpi-summary.json
EXECUTION_KPI_MONITOR_WINDOW_SEC=3600
EXECUTION_KPI_MONITOR_MIN_TRADE_SAMPLES=3
EXECUTION_KPI_MONITOR_REPORT_EVERY_WINDOWS=1
EXECUTION_KPI_MONITOR_SUMMARY_MAX_ENTRIES=720
EXECUTION_KPI_MONITOR_ALERT_WIN_RATE_PCT=35
EXECUTION_KPI_MONITOR_ALERT_EXPECTANCY_KRW=-5000
EXECUTION_KPI_MONITOR_ALERT_MAX_ABS_SLIPPAGE_BPS=120

# Optimizer (external AI/optimizer job)
OPTIMIZER_ENABLED=true
OPTIMIZER_APPLY_ON_START=false
OPTIMIZER_APPLY_TO_AI_SETTINGS=true
OPTIMIZER_REPORT_FILE=.trader/optimizer-report.json
OPTIMIZER_INTERVAL=15m
OPTIMIZER_CANDLE_COUNT=200
OPTIMIZER_INITIAL_CASH_KRW=1000000
OPTIMIZER_BASE_ORDER_AMOUNT_KRW=20000
OPTIMIZER_MIN_ORDER_NOTIONAL_KRW=20000
OPTIMIZER_FEE_BPS=5
OPTIMIZER_BACKTEST_SLIPPAGE_BPS=0
OPTIMIZER_MAX_DRAWDOWN_PCT=10
OPTIMIZER_MIN_TRADES=4
OPTIMIZER_MIN_WIN_RATE_PCT=45
OPTIMIZER_MIN_PROFIT_FACTOR=1.05
OPTIMIZER_MIN_RETURN_PCT=0
OPTIMIZER_SYMBOLS=BTC_KRW,ETH_KRW,USDT_KRW
OPTIMIZER_WALK_FORWARD_ENABLED=true
OPTIMIZER_WALK_FORWARD_SCORE_WEIGHT=0.25
OPTIMIZER_WALK_FORWARD_TRAIN_WINDOW=80
OPTIMIZER_WALK_FORWARD_TEST_WINDOW=40
OPTIMIZER_WALK_FORWARD_STEP_WINDOW=30
OPTIMIZER_WALK_FORWARD_MAX_FOLDS=0
OPTIMIZER_WALK_FORWARD_MIN_SCORE=-999999
OPTIMIZER_WALK_FORWARD_MIN_FOLD_COUNT=4
OPTIMIZER_WALK_FORWARD_MIN_PASS_RATE=0.55
OPTIMIZER_TOP_RESULTS=10
OPTIMIZER_MOMENTUM_LOOKBACKS=24,36,48,72
OPTIMIZER_VOLATILITY_LOOKBACKS=72,96,120,144
OPTIMIZER_ENTRY_BPS=10,16,24,32
OPTIMIZER_EXIT_BPS=6,10,14,20
OPTIMIZER_TARGET_VOLATILITY_PCT=0.35,0.5
OPTIMIZER_RM_MIN_MULTIPLIER=0.4
OPTIMIZER_RM_MAX_MULTIPLIER=1.6,1.8
OPTIMIZER_LOCK_FILE=.trader/optimize.lock
OPTIMIZER_LOCK_TTL_SEC=900
